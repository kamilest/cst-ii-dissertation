\chapter{Conclusion}

% This chapter is likely to be very short and it may well refer back to the Introduction. It might properly explain how you would have planned the project if starting again with the benefit of hindsight.

%  ~500 words

\section{Success criteria}
The project has achieved all of its success criteria and requirements (Section~\ref{section:requirements-analysis} and Project Proposal, Appendix~\ref{chapter:project-proposal}), representing the UKB dataset as a population graph, implementing the two GNN frameworks, and evaluating their results. It has also made a lot of progress on its proposed extensions, measuring the significance and robustness of the GNN models and increasing the flexibility of the preprocessing pipeline to more preprocessing options.

\section{The main lesson}
This project has been exploring two things â€“ the brain age estimation problem, and graph neural networks as a way of solving it. Both of those fields are currently at the height of their ongoing research, with some of the main references that this project relied on being only a few months old~\cite{kaufmann2019, niu2019improved, pervaiz2020optimising}.

I am very happy for having used this opportunity to learn about the advanced, cutting-edge approaches in neuroimaging and machine learning research, and to get hands-on experience with the tools for implementing them. At the same time, this project has taught me first-hand an important lesson in approaching predictive analysis problems that is best summarised by the Occam's razor: when developing models in practice, the simplest approaches should be attempted first, and only then, if the simple models do not perform well, build up to sophisticated (``deep'') architectures. Both advanced graph neural networks models were not even close to much simpler approaches presented in literature. I am particularly proud of coming up with what I called the robustness measurement framework, which insightfully showed that the graph representation was not only not very useful for this problem (as removing edge information had no effect on model performance), but could even have a negative effect when the data is noisy.

At the same time, the graph neural networks should not be discredited too early. The main advantage of population graphs to combine both imaging and non-imaging modalities for different sub-populations at once is still something that is not as practical to do with other brain age prediction approaches, and has achieved state-of-the-art results in similar applications~\cite{parisot2018disease}. The population graphs have been constrained to only five out of hundreds of possible non-imaging features (possibly resulting in poor similarity scoring), and the GNN architectures have been severely limited because of the memory constraints (including the omission of an entire modality of features). Eliminating both of those constraints as well as trying alternative graph neural network architectures could give a better picture of the potential of this approach.

% Mention Niu et al. 2019 raising the issue that there is systematic bias in brain age gap prediction but not many studies use this knowledge to correct for it. 

\section{Towards a more powerful preprocessing pipeline}
The main success of this project was its step towards a preprocessing pipeline that could process several brain imaging and non-imaging modalities at once into a unified and consistent manner. This is important in neuroimaging research regardless of the downstream task or analysis method: even for the same dataset, the preprocessing workflow alone could change the results~\cite{salehi2020there}. At the same time, the workflows (especially for functional data) may vary significantly between different research teams; for example, in a study by Botvinik-Nezer et al.~\cite{botvinik2019variability} none of the 70 teams chose the same workflow for an identical problem.

The preprocessing framework is also a project that could especially benefit from good software engineering and computer science skills in order to design a general pipeline that is efficient, flexible and simple to apply to different contexts.

While it was not practical to do this extension for the UKB dataset that uses its own organisation and preprocessing steps, the pipeline could be adapted to work with raw magnetic resonance images, which would make it applicable to many more neuroimaging datasets and parcellations (that would now be a part of the preprocessing framework). This could be especially useful in a more general clinical setting where image acquisition is not standardised and the neuroimaging preprocessing expertise might not be available.

The options of using more powerful functional imaging preprocessing and dimensionality reduction techniques, as well as the option to use an additional modality of genetic data (which is widely used in other neuroimaging studies, improving predictive power of the models \cite{cole2018brain,parisot2018disease}) could be included.

% TODO: you should mention in your future work that you've used a linear data reduction technique. Given how noisy and non-linear the fMRI is, future work should explore better ways to get a good representation of fmri timeseries, which maybe would help in this prediction task, but out of scope of dissertation
% Apr 23, 2020 1:31 AM
% Tiago Manuel: besides you are backed up by niu's paper saying that fmri might not be useful. but still the reasoning point of linear/non linear interactions maintains

% rb643: Again more for future implementation: I've been playing around with running PCA on the raw time-series as well as Diffusion Embedding on the connectivity matrices and they provide strikingly similar results. Thus is might be computationally efficient to use raw time-series PCA in the future. Generally only the first half dozen PC's are interesting anyway